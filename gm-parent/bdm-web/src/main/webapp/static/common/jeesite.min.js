/*!
 * Copyright &copy; 2012-2013 <a href="https://github.com/thinkgem/jeesite">JeeSite</a> All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 */
function include(c, m, e) {
    if (document.getElementById(c) == null) {
        var a = typeof e == "string" ? [e] : e;
        for (var f = 0; f < a.length; f++) {
            var b = a[f].replace(/^\s|\s$/g, "");
            var h = b.split(".");
            var d = h[h.length - 1].toLowerCase();
            var k = d == "css";
            var l = k ? "link" : "script";
            var g = k ? " type='text/css' rel='stylesheet' " : " type='text/javascript' ";
            var j = (k ? "href" : "src") + "='" + m + b + "'";
            document.write("<" + l + (f == 0 ? " id=" + c : "") + g + j + "></" + l + ">")
        }
    }
}
function windowOpen(d, c, e, a) {
    var g = parseInt((window.screen.height - a) / 2, 10), f = parseInt((window.screen.width - e) / 2, 10), b = "location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes,width=" + e + ",height=" + a + ",top=" + g + ",left=" + f;
    window.open(d, c, b)
}
function loading(a) {
    top.$.jBox.tip.mess = null;
    top.$.jBox.tip(a, "loading", {opacity: 0})
}
function confirmx(b, a) {
    top.$.jBox.confirm(b, "系统提示", function (c, d, e) {
        if (c == "ok") {
            loading("正在提交，请稍等...");
            location = a
        }
    }, {buttonsFocus: 1});
    top.$(".jbox-body .jbox-icon").css("top", "55px");
    return false
}
function createDivParent(tabId, tabUrl, tabName,isNew){
    //如果当前tabId存在直接显示已经打开的tab
    if(window.parent.document.getElementById("div_" + tabId) == null){
        if(!isNew)
            return false;
        // 创建iframe
        var box = window.parent.document.createElement("iframe");
        box.id = "div_" + tabId;
        box.src = tabUrl;
        box.width = "100%";
        box.height = "100%";
        box.frameBorder = "no";
        box.iframeScrolling = "yes";
        window.parent.document.getElementById("div_panel").appendChild(box);

        //遍历并清除开始存在的tab当前效果并隐藏其显示的div
        var tabList = window.parent.document.getElementById("div_tab").getElementsByTagName('li');
        var panellist = window.parent.document.getElementById("div_panel").getElementsByTagName('iframe');
        if (tabList.length > 0)
        {
            for (i = 0; i < tabList.length; i++)
            {
                tabList[i].className = "";
                panellist[i].style.display = "none";
            }
        }

        //创建li菜单
        var tab = window.parent.document.createElement("li");
        tab.className = "active";
        tab.id = tabId;
        var litxt = "<a href=\"javascript:;\" onclick=\"javascript:createDivThis('" + tabId + "','" + tabUrl + "','" + tabName + "',false)\" data-toggle=\""+tabName+"\" >" + tabName + "<i class=\"menu icon-remove pull-right\" style=\"cursor:pointer\" title=\"close\" onclick=\"removeDiv('" + tabId + "')\"></i></a>";
        tab.innerHTML = litxt;
        window.parent.document.getElementById("div_tab").appendChild(tab);
    }
    else{
        var tabList = window.parent.document.getElementById("div_tab").getElementsByTagName('li');
        var panelList = window.parent.document.getElementById("div_panel").getElementsByTagName('iframe');
        for (i = 0; i < tabList.length; i++)
        {
            tabList[i].className = "";
            panelList[i].style.display = "none";
        }
        window.parent.document.getElementById(tabId).className = 'active';
        window.parent.document.getElementById("div_" + tabId).style.display = 'block';
    }
    return false;
}
function createDivThis(tabId, tabUrl, tabName){
    //如果当前tabId存在直接显示已经打开的tab
    if(document.getElementById("div_" + tabId) == null){
        if(!isNew)
            return false;
        // 创建iframe
        var box = document.createElement("iframe");
        box.id = "div_" + tabId;
        box.src = tabUrl;
        box.width = "100%";
        box.height = "100%";
        box.frameBorder = "no";
        box.iframeScrolling = "yes";
        document.getElementById("div_panel").appendChild(box);

        //遍历并清除开始存在的tab当前效果并隐藏其显示的div
        var tabList = document.getElementById("div_tab").getElementsByTagName('li');
        var panellist = document.getElementById("div_panel").getElementsByTagName('iframe');
        if (tabList.length > 0)
        {
            for (i = 0; i < tabList.length; i++)
            {
                tabList[i].className = "";
                panellist[i].style.display = "none";
            }
        }

        //创建li菜单
        var tab = document.createElement("li");
        tab.className = "active";
        tab.id = tabId;
        var litxt = "<a href=\"javascript:;\" onclick=\"javascript:createDivThis('" + tabId + "','" + tabUrl + "','" + tabName + "',false)\" data-toggle=\""+tabName+"\" >" + tabName + "<i class=\"menu icon-remove pull-right\" style=\"cursor:pointer\" title=\"close\" onclick=\"removeDiv('" + tabId + "')\"></i></a>";
        tab.innerHTML = litxt;
        document.getElementById("div_tab").appendChild(tab);
    }
    else{
        var tabList = document.getElementById("div_tab").getElementsByTagName('li');
        var panelList = document.getElementById("div_panel").getElementsByTagName('iframe');
        for (i = 0; i < tabList.length; i++)
        {
            tabList[i].className = "";
            panelList[i].style.display = "none";
        }
        document.getElementById(tabId).className = 'active';
        document.getElementById("div_" + tabId).style.display = 'block';
    }
    return false;
}
$(document).ready(function () {
    $("select").select2();
    $(".fancybox").fancybox()
});